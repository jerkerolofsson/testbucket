@page "/{tenantId}/Settings/Projects/{projectSlug}/Fields"
@layout SettingsLayout
@attribute [Authorize(Roles = "ADMIN")]
@inject ProjectService projectService
@inject IDialogService dialogService

<TenantRedirect/>

<MudStack Class="container-settings-page">
    @if (_project is not null)
    {
        <ProjectFieldsEditor Project="@_project" />
    }
</MudStack>


@code {
    [Parameter] public string? TenantId { get; set; }
    [Parameter] public string? ProjectSlug { get; set; }

    private TestProject? _project = null;

    protected override async Task OnParametersSetAsync()
    {
        if (ProjectSlug is not null && _project?.Slug != ProjectSlug)
        {
            _project = await projectService.GetProjectBySlugAsync(ProjectSlug);
        }
    }
}
